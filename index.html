<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>نتفلكس العرب - أفلام ومسلسلات مباشرة</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Video.js CSS -->
    <link href="https://vjs.zencdn.net/8.10.0/video-js.css" rel="stylesheet">
    <style>
        /* ... (ابقى على كل الأنماط السابقة كما هي) ... */

        /* أنماط إضافية للأفلام */
        .movie-card {
            min-width: 220px;
            width: 220px;
            height: 330px;
            border-radius: 8px;
            overflow: hidden;
            position: relative;
            cursor: pointer;
            transition: transform 0.3s ease;
            background: var(--card-bg);
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.3);
        }

        .movie-card:hover {
            transform: scale(1.05);
            z-index: 10;
        }

        .movie-poster {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .movie-info {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: linear-gradient(to top, rgba(0,0,0,0.9) 0%, rgba(0,0,0,0) 100%);
            padding: 15px;
            opacity: 0;
            transition: opacity 0.3s;
        }

        .movie-card:hover .movie-info {
            opacity: 1;
        }

        .movie-title {
            font-weight: 700;
            font-size: 1rem;
            margin-bottom: 5px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .movie-meta {
            display: flex;
            justify-content: space-between;
            font-size: 0.9rem;
            color: #ccc;
        }

        .loading {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100px;
            color: var(--primary-color);
            font-size: 1.5rem;
        }

        .loading i {
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <!-- ... (ابقى على كل الـ HTML السابق كما هو) ... -->

    <!-- قسم الأفلام -->
    <section class="content-section">
        <div class="section-header">
            <h2 class="section-title">أحدث الأفلام</h2>
            <a href="#" class="see-all" id="loadMoreMovies">عرض المزيد</a>
        </div>
        <div class="channel-row" id="moviesRow">
            <div class="loading">
                <i class="fas fa-spinner"></i> جاري تحميل الأفلام...
            </div>
        </div>
    </section>

    <!-- ... (ابقى على بقية الـ HTML كما هو) ... -->

    <script>
        document.addEventListener("DOMContentLoaded", function() {
            // ... (ابقى على كل الكود السابق كما هو) ...

            // متغيرات الأفلام
            let currentMoviePage = 1;
            const moviesRow = document.getElementById("moviesRow");
            const loadMoreMoviesBtn = document.getElementById("loadMoreMovies");

            // مصادر الأفلام
            const movieSources = [
                'https://todays-video.online/ios/getLink?id=',
                'https://todays-video.online/ios/splash?key=e25874f2d86e061e06a571f8ef006e0b&v=betweens2',
                'https://elrvvmdnz.com/videos/',
                'https://video.almanhavvly.net/videos/',
                'https://clash.rosetvvta-one.online/videos/',
                'https://todays-video.online/ios/episodes?id='
            ];

            // جلب الأفلام
            async function fetchMovies(page = 1) {
                try {
                    // في الواقع الفعلي، هنا ستقوم بجلب البيانات من الخوادم
                    // لكن لأغراض العرض، سنستخدم بيانات وهمية
                    
                    // محاكاة جلب البيانات من الخادم
                    await new Promise(resolve => setTimeout(resolve, 1000));
                    
                    // بيانات وهمية للأفلام (في التطبيق الحقيقي ستأتي من API)
                    const mockMovies = [
                        {
                            id: 'movie1',
                            title: 'فيلم الحركة الجريء',
                            poster: 'https://i.ibb.co/0jQ7Z0N/action-movie.jpg',
                            year: '2023',
                            rating: '4.5 ★',
                            url: 'https://example.com/movie1.m3u8'
                        },
                        {
                            id: 'movie2',
                            title: 'الكوميديا المضحكة',
                            poster: 'https://i.ibb.co/0jQ7Z0N/comedy-movie.jpg',
                            year: '2022',
                            rating: '4.2 ★',
                            url: 'https://example.com/movie2.m3u8'
                        },
                        {
                            id: 'movie3',
                            title: 'الدراما العاطفية',
                            poster: 'https://i.ibb.co/0jQ7Z0N/drama-movie.jpg',
                            year: '2024',
                            rating: '4.7 ★',
                            url: 'https://example.com/movie3.m3u8'
                        },
                        {
                            id: 'movie4',
                            title: 'المغامرة المشوقة',
                            poster: 'https://i.ibb.co/0jQ7Z0N/adventure-movie.jpg',
                            year: '2021',
                            rating: '4.3 ★',
                            url: 'https://example.com/movie4.m3u8'
                        },
                        {
                            id: 'movie5',
                            title: 'الرعب المرعب',
                            poster: 'https://i.ibb.co/0jQ7Z0N/horror-movie.jpg',
                            year: '2023',
                            rating: '4.0 ★',
                            url: 'https://example.com/movie5.m3u8'
                        }
                    ];

                    // عرض الأفلام
                    displayMovies(mockMovies);
                    
                    // في التطبيق الحقيقي:
                    // const randomSource = movieSources[Math.floor(Math.random() * movieSources.length)];
                    // const response = await fetch(`${randomSource}?page=${page}`);
                    // const movies = await response.json();
                    // displayMovies(movies);
                    
                } catch (error) {
                    console.error('حدث خطأ في جلب الأفلام:', error);
                    moviesRow.innerHTML = '<div class="error">حدث خطأ في تحميل الأفلام. يرجى المحاولة لاحقاً.</div>';
                }
            }

            // عرض الأفلام
            function displayMovies(movies) {
                if (currentMoviePage === 1) {
                    moviesRow.innerHTML = '';
                }

                movies.forEach(movie => {
                    const movieCard = document.createElement('div');
                    movieCard.className = 'movie-card';
                    movieCard.setAttribute('data-id', movie.id);
                    movieCard.setAttribute('data-src', movie.url);
                    movieCard.setAttribute('data-poster', movie.poster);
                    
                    movieCard.innerHTML = `
                        <img src="${movie.poster}" class="movie-poster" alt="${movie.title}">
                        <div class="movie-info">
                            <div class="movie-title">${movie.title}</div>
                            <div class="movie-meta">
                                <span>${movie.year}</span>
                                <span class="rating">${movie.rating}</span>
                            </div>
                        </div>
                    `;
                    
                    movieCard.addEventListener('click', function() {
                        setActiveMovie(movie);
                    });
                    
                    moviesRow.appendChild(movieCard);
                });
            }

            // تشغيل الفيلم
            function setActiveMovie(movie) {
                playerContainer.style.display = "flex";
                document.body.style.overflow = "hidden";
                
                player.poster(movie.poster);
                player.src({
                    src: movie.url,
                    type: 'application/x-mpegURL'
                });
                
                player.play()
                    .then(() => console.log("بدأ تشغيل الفيلم"))
                    .catch(e => {
                        console.error("خطأ في تشغيل الفيلم:", e);
                        player.error({
                            code: 2,
                            message: "تعذر تشغيل الفيلم، يرجى المحاولة لاحقاً"
                        });
                    });
            }

            // تحميل المزيد من الأفلام
            loadMoreMoviesBtn.addEventListener('click', function(e) {
                e.preventDefault();
                currentMoviePage++;
                fetchMovies(currentMoviePage);
            });

            // جلب الأفلام عند تحميل الصفحة
            fetchMovies();
        });
    </script>
</body>
</html>