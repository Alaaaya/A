<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8">
  <title>منصة الفيديو</title>
  <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
  <style>
    body { font-family: Arial; direction: rtl; background: #f5f5f5; padding: 20px; }
    .grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(180px, 1fr)); gap: 15px; }
    .item { background: white; border: 1px solid #ccc; padding: 10px; cursor: pointer; text-align: center; }
    .item img { width: 100%; height: 260px; object-fit: cover; }
    video { width: 100%; max-width: 720px; margin: 30px auto; display: block; }
  </style>
</head>
<body>

  <h2>منصة تشغيل الفيديوهات</h2>
  <video id="player" controls></video>
  <div class="grid" id="videoList"></div>

  <script>
    const videos = [
      {"id":5419,"title":"The Lord of the Rings: The Rings of Power S2","portrait":"https://media0075.elcinema.com/uploads/_315x420_c373f9ade9017c124f182afb27cd72c0c57b7613c87d38b1fa366c48f399479f.jpg"},
      {"id":5534,"title":"6 ايام","portrait":"https://media0075.elcinema.com/uploads/_315x420_3779008c7672452eb79f399763c70c65bb29e0839446e76fa8f509a07b88ee11.jpg"},
      {"id":5536,"title":"حلقة تجريبية","portrait":"https://media0075.elcinema.com/uploads/_315x420_c373f9ade9017c124f182afb27cd72c0c57b7613c87d38b1fa366c48f399479f.jpg"}
    ];

    const container = document.getElementById('videoList');
    const videoPlayer = document.getElementById('player');

    videos.forEach(item => {
      const div = document.createElement('div');
      div.className = 'item';
      div.innerHTML = `<img src="${item.portrait}" alt="${item.title}"><p>${item.title}</p>`;
      div.onclick = () => playVideo(item.id);
      container.appendChild(div);
    });

    function playVideo(id) {
      const url = `https://clash.rosetta-one.online/videos/${id}/${id}_2_.m3u8`;
      if (Hls.isSupported()) {
        const hls = new Hls();
        hls.loadSource(url);
        hls.attachMedia(videoPlayer);
        hls.on(Hls.Events.MANIFEST_PARSED, () => videoPlayer.play());
      } else if (videoPlayer.canPlayType('application/vnd.apple.mpegurl')) {
        videoPlayer.src = url;
        videoPlayer.addEventListener('loadedmetadata', () => videoPlayer.play());
      }
    }
  </script>

</body>
</html>