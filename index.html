<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>بث مباشر - قنوات إخبارية ومسلسلات</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    :root {
      --primary-color: rgba(33, 150, 243, 0.9);
      --bg-gradient: linear-gradient(45deg, #0f172a, #1e293b);
      --glass-bg: rgba(255, 255, 255, 0.1);
      --glass-border: rgba(255, 255, 255, 0.25);
      --glass-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
      --favorite-color: #ffd700;
    }
    body {
      font-family: 'Segoe UI', Tahoma, sans-serif;
      background: #0f172a;
      color: white;
      margin: 0;
      padding: 0;
      direction: rtl;
    }
    .container {
      max-width: 1200px;
      margin: auto;
      padding: 20px;
    }
    .player-section {
      position: relative;
      margin-bottom: 20px;
      background: var(--glass-bg);
      backdrop-filter: blur(20px);
      border: 1px solid var(--glass-border);
      box-shadow: var(--glass-shadow);
      border-radius: 15px;
      padding: 15px;
    }
    #videoPlayer {
      width: 100%;
      height: 40vh;
      background: black;
      border-radius: 10px;
    }
    .loading-overlay {
      position: absolute;
      top: 0; left: 0; right: 0; bottom: 0;
      background: rgba(0, 0, 0, 0.7);
      display: none;
      justify-content: center;
      align-items: center;
      border-radius: 10px;
      z-index: 10;
    }
    .spinner {
      width: 50px;
      height: 50px;
      border: 5px solid rgba(255, 255, 255, 0.3);
      border-radius: 50%;
      border-top-color: var(--primary-color);
      animation: spin 1s linear infinite;
    }
    @keyframes spin {
      to { transform: rotate(360deg); }
    }
    .fullscreen-btn {
      position: absolute;
      bottom: 15px;
      left: 15px;
      background: rgba(0, 0, 0, 0.6);
      border: none;
      border-radius: 50%;
      color: white;
      width: 40px;
      height: 40px;
      cursor: pointer;
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="control-buttons">
      <button class="theme-toggle" id="themeToggle">
        <i class="fas fa-moon"></i> <span>الوضع الليلي</span>
      </button>
      <button class="language-toggle" id="languageToggle">
        <i class="fas fa-language"></i> <span>English</span>
      </button>
    </div>

    <div class="search-bar">
      <input type="text" id="searchInput" placeholder="ابحث عن قناة...">
      <i class="fas fa-search"></i>
    </div>

    <div class="player-section">
      <div class="loading-overlay" id="loadingOverlay">
        <div class="spinner"></div>
      </div>
      <video id="videoPlayer" controls autoplay playsinline></video>
      <button class="fullscreen-btn" id="fullscreenBtn" title="ملء الشاشة">
        <i class="fas fa-expand"></i>
      </button>
    </div>
        <!-- قسم القنوات -->
    <div class="channel-grid" id="newsGrid">
      <div class="channel-card" data-src="https://live-hls-web-aja.getaj.net/AJA/index.m3u8" data-id="aljazeera">
        <i class="fas fa-star favorite-icon"></i>
        <img src="https://iconape.com/wp-content/files/kt/20448/png/Aljazeera-01.png" class="channel-logo" alt="الجزيرة">
        <div class="channel-name">الجزيرة</div>
      </div>

      <div class="channel-card" data-src="https://av.alarabiya.net/alarabiapublish/alarabiya.smil/playlist.m3u8" data-id="alarabiya">
        <i class="fas fa-star favorite-icon"></i>
        <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/e/e0/Al-Arabiya_new_logo.svg/2560px-Al-Arabiya_new_logo.svg.png" class="channel-logo" alt="العربية">
        <div class="channel-name">العربية</div>
      </div>
    </div>
  </div> <!-- إغلاق .container -->

  <script>
    document.addEventListener("DOMContentLoaded", function () {
      const videoPlayer = document.getElementById("videoPlayer");
      const channels = document.querySelectorAll(".channel-card");
      const loadingOverlay = document.getElementById("loadingOverlay");
      const fullscreenBtn = document.getElementById("fullscreenBtn");
      const searchInput = document.getElementById("searchInput");
      const themeToggle = document.getElementById("themeToggle");
      const languageToggle = document.getElementById("languageToggle");

      function setActiveChannel(channel) {
        channels.forEach(c => c.classList.remove("active"));
        channel.classList.add("active");

        const streamUrl = channel.getAttribute("data-src");
        loadingOverlay.style.display = "flex";
        videoPlayer.src = streamUrl;
        videoPlayer.load();

        videoPlayer.addEventListener('canplay', function () {
          loadingOverlay.style.display = "none";
          videoPlayer.play().catch(() => {});
        }, { once: true });

        videoPlayer.addEventListener('error', function () {
          loadingOverlay.style.display = "none";
        }, { once: true });
      }

      searchInput.addEventListener("input", () => {
        const term = searchInput.value.toLowerCase();
        channels.forEach(channel => {
          const name = channel.querySelector(".channel-name").textContent.toLowerCase();
          channel.style.display = name.includes(term) ? "block" : "none";
        });
      });

      fullscreenBtn.addEventListener("click", () => {
        if (videoPlayer.requestFullscreen) videoPlayer.requestFullscreen();
        else if (videoPlayer.webkitRequestFullscreen) videoPlayer.webkitRequestFullscreen();
        else if (videoPlayer.msRequestFullscreen) videoPlayer.msRequestFullscreen();
      });

      themeToggle.addEventListener("click", () => {
        document.body.classList.toggle("light-mode");
        themeToggle.innerHTML = document.body.classList.contains("light-mode")
          ? '<i class="fas fa-sun"></i> <span>الوضع النهاري</span>'
          : '<i class="fas fa-moon"></i> <span>الوضع الليلي</span>';
      });

      languageToggle.addEventListener("click", () => {
        const isArabic = document.documentElement.lang === "ar";
        document.documentElement.lang = isArabic ? "en" : "ar";
        document.documentElement.dir = isArabic ? "ltr" : "rtl";
        languageToggle.innerHTML = isArabic
          ? '<i class="fas fa-language"></i> <span>العربية</span>'
          : '<i class="fas fa-language"></i> <span>English</span>';
        document.title = isArabic
          ? "Live Streaming - News & Series"
          : "بث مباشر - قنوات إخبارية ومسلسلات";
      });

      channels.forEach(channel => {
        channel.addEventListener("click", () => setActiveChannel(channel));
        const starIcon = channel.querySelector(".favorite-icon");
        starIcon.addEventListener("click", (e) => {
          e.stopPropagation();
          toggleFavorite(channel);
        });
      });

      // المفضلة
      let favorites = JSON.parse(localStorage.getItem("favorites")) || [];

      function toggleFavorite(channel) {
        const id = channel.getAttribute("data-id");
        const isFav = favorites.includes(id);

        if (isFav) {
          favorites = favorites.filter(f => f !== id);
          channel.classList.remove("favorite");
        } else {
          favorites.push(id);
          channel.classList.add("favorite");
        }

        localStorage.setItem("favorites", JSON.stringify(favorites));
      }

      favorites.forEach(id => {
        const channel = document.querySelector(`.channel-card[data-id="${id}"]`);
        if (channel) {
          channel.classList.add("favorite");
        }
      });

      const defaultChannel = document.querySelector(".channel-card");
      if (defaultChannel) {
        setActiveChannel(defaultChannel);
      }
    });
  </script>
</body>
</html>